<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
  <link rel="icon" href="Images/favicon.ico" type="image/x-icon">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Login | NearbyNow</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Poppins', sans-serif;
    }
    .toggle-password-btn {
      cursor: pointer;
      position: absolute;
      right: 0.75rem;
      top: 50%;
      transform: translateY(-50%);
      color: #9ca3af;
      transition: color 0.25s ease;
    }
    .toggle-password-btn:hover,
    .toggle-password-btn:focus {
      color: #6366f1;
    }
    @keyframes bounce-small {
      0%,
      100% {
        transform: translateY(0);
      }

      50% {
        transform: translateY(-4px);
      }
    }
    .bounce-on-hover:hover {
      animation: bounce-small 0.6s ease-in-out infinite;
    }
  </style>
</head>

<body
  class="min-h-screen bg-gradient-to-tr from-indigo-600 via-purple-700 to-pink-600 flex items-center justify-center p-5">
  <main
    class="w-full max-w-md bg-white/90 backdrop-blur-md rounded-3xl shadow-2xl px-8 py-10 sm:px-12 sm:py-14 relative overflow-hidden">

    <section class="text-center mb-8">
      <h1 class="text-4xl font-extrabold text-indigo-700 mb-1 select-none">NearbyNow</h1>
      <p class="text-gray-600 font-medium tracking-wide select-none">Your Neighbourhood, Your Network.</p>
    </section>

    <section class="relative flex justify-center mb-8 select-none">
      <button id="showLogin" aria-selected="true"
        class="tab-toggle relative z-10 px-6 py-2 font-semibold text-indigo-700 border-b-2 border-indigo-700 focus-visible:outline focus-visible:outline-indigo-500"
        role="tab" type="button" tabindex="0">Login</button>
      <button id="showSignup" aria-selected="false"
        class="tab-toggle relative z-10 px-6 py-2 font-semibold text-gray-400 hover:text-indigo-700 border-b-2 border-transparent focus-visible:outline focus-visible:outline-indigo-500"
        role="tab" type="button" tabindex="-1">Sign Up</button>

      <div id="tabSlider" class="absolute bottom-0 h-[3px] w-1/2 bg-indigo-600 rounded-t-full left-0"></div>
    </section>

    <p id="message" role="alert" aria-live="assertive" class="mb-4 text-center text-sm font-semibold"></p>

    <form id="loginForm" role="tabpanel" aria-hidden="false" class="space-y-6" autocomplete="on" novalidate>
      <div>
        <input id="loginEmail" type="email" placeholder="Email address"
          class="w-full rounded-lg border border-gray-300 bg-white px-5 py-3 text-gray-900 focus:border-indigo-600 focus:ring-2 focus:ring-indigo-300 focus:outline-none"
          required autocomplete="email" />
      </div>

      <div class="relative">
        <input id="loginPassword" type="password" placeholder="Password"
          class="w-full rounded-lg border border-gray-300 bg-white px-5 py-3 pr-12 text-gray-900 focus:border-indigo-600 focus:ring-2 focus:ring-indigo-300 focus:outline-none"
          required autocomplete="current-password" minlength="6" />

        <button type="button" id="toggleLoginPassword" class="toggle-password-btn" aria-label="Show password"
          tabindex="0">
          <svg xmlns="http://www.w3.org/2000/svg" id="loginPasswordEye" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
            stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
          </svg>
        </button>
      </div>

      <div class="flex items-center justify-between">
        <label for="rememberMe" class="flex items-center cursor-pointer select-none space-x-2 text-gray-700">
          <input type="checkbox" id="rememberMe" class="w-4 h-4 rounded border-gray-300 focus:ring-indigo-500" />
          <span>Remember me</span>
        </label>

        <button id="passwordResetBtn" type="button"
          class="text-sm text-indigo-600 hover:text-indigo-800 underline focus:outline-none">Forgot password?</button>
      </div>

      <button type="submit"
        class="w-full rounded-lg bg-indigo-600 py-3 font-semibold text-white shadow-md hover:bg-indigo-700 focus-visible:outline focus-visible:outline-indigo-500 focus-visible:outline-2 transition duration-200">Login</button>
    </form>

    <form id="signupForm" role="tabpanel" aria-hidden="true" class="space-y-6 hidden" autocomplete="on" novalidate>
      <div>
        <input id="signupEmail" type="email" placeholder="Email address"
          class="w-full rounded-lg border border-gray-300 bg-white px-5 py-3 text-gray-900 focus:border-indigo-600 focus:ring-2 focus:ring-indigo-300 focus:outline-none"
          required autocomplete="email" />
      </div>

      <div class="relative">
        <input id="signupPassword" type="password" placeholder="Password"
          class="w-full rounded-lg border border-gray-300 bg-white px-5 py-3 pr-12 text-gray-900 focus:border-indigo-600 focus:ring-2 focus:ring-indigo-300 focus:outline-none"
          required autocomplete="new-password" minlength="6" />

        <button type="button" id="toggleSignupPassword" class="toggle-password-btn" aria-label="Show password"
          tabindex="0">
          <svg xmlns="http://www.w3.org/2000/svg" id="signupPasswordEye" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
            stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
          </svg>
        </button>
      </div>

      <button type="submit"
        class="w-full rounded-lg bg-indigo-600 py-3 font-semibold text-white shadow-md hover:bg-indigo-700 focus-visible:outline focus-visible:outline-indigo-500 focus-visible:outline-2 transition duration-200">Sign
        Up</button>
    </form>

    <div class="mt-10 text-center">
      <p class="text-gray-500 mb-4 font-semibold tracking-wide select-none">Or continue with</p>
      <div class="flex justify-center gap-5">
        <button aria-label="Sign in with Google" title="Google" id="googleSignInBtn"
          class="flex items-center justify-center gap-3 rounded-lg border border-gray-300 px-5 py-2 font-semibold text-gray-700 hover:bg-gray-100 transition duration-150 active:scale-[.97] bounce-on-hover">
          <svg class="h-6 w-6" aria-hidden="true" viewBox="0 0 533.5 544.3">
            <path fill="#4285f4"
              d="M533.5 278.4c0-17.4-1.5-34.2-4.7-50.5H272v95.6h146.9c-6.4 34.6-25.4 63.9-54 83.5v69.3h87.1c50.9-47 80.5-116.1 80.5-197.9z" />
            <path fill="#34a853"
              d="M272 544.3c73.8 0 135.6-24.5 180.8-66.5l-87.1-69.3c-24.2 16.3-55.3 26-93.7 26-71.8 0-132.7-48.5-154.6-113.6H30.4v71.2C75 492.8 167.3 544.3 272 544.3z" />
            <path fill="#fbbc04"
              d="M117.4 319.3c-4.7-14-7.4-29-7.4-44.3s2.7-30.3 7.4-44.3v-71.2H30.4a272 272 0 0 0 0 230.9l87-71.1z" />
            <path fill="#ea4335"
              d="M272 107.7c39.9 0 75.8 13.7 104.1 40.7l78.3-78.3C406.9 24.9 344.9 0 272 0 167.3 0 75 51.6 30.4 128.4l87 71.1c22-65.2 82.9-113.6 154.6-113.6z" />
          </svg>
          Google
        </button>
      </div>
    </div>

  </main>

  <script>
    var firebaseConfig = {
      apiKey: "AIzaSyCzch-53vyEw_wTkopkBfmnYT-xQL4mG-A",
      authDomain: "nearbynow-in.firebaseapp.com",
      databaseURL: "https://nearbynow-in-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "nearbynow-in",
      storageBucket: "nearbynow-in.firebasestorage.app",
      messagingSenderId: "43936475211",
      appId: "1:43936475211:web:14642efc4b732dca3645ce"
    };
    firebase.initializeApp(firebaseConfig);

    var auth = firebase.auth();
    var googleProvider = new firebase.auth.GoogleAuthProvider();

    var loginForm = document.getElementById("loginForm");
    var signupForm = document.getElementById("signupForm");
    var showLogin = document.getElementById("showLogin");
    var showSignup = document.getElementById("showSignup");
    var msg = document.getElementById("message");
    var tabSlider = document.getElementById("tabSlider");

    function switchToLogin() {
      loginForm.classList.remove("hidden");
      signupForm.classList.add("hidden");
      showLogin.classList.add("border-indigo-700", "text-indigo-700");
      showLogin.setAttribute("aria-selected", "true");
      showSignup.classList.remove("border-indigo-700", "text-indigo-700");
      showSignup.setAttribute("aria-selected", "false");
      tabSlider.style.left = "0%";
      msg.textContent = "";
      msg.style.color = "";
    }

    function switchToSignup() {
      signupForm.classList.remove("hidden");
      loginForm.classList.add("hidden");
      showSignup.classList.add("border-indigo-700", "text-indigo-700");
      showSignup.setAttribute("aria-selected", "true");
      showLogin.classList.remove("border-indigo-700", "text-indigo-700");
      showLogin.setAttribute("aria-selected", "false");
      tabSlider.style.left = "50%";
      msg.textContent = "";
      msg.style.color = "";
    }

    showLogin.onclick = switchToLogin;
    showSignup.onclick = switchToSignup;
    switchToLogin();

    function setupPasswordToggle(toggleBtnId, passwordInputId) {
      var toggleBtn = document.getElementById(toggleBtnId);
      var passwordInput = document.getElementById(passwordInputId);
      var eyeIcon = toggleBtn.querySelector("svg");

      toggleBtn.addEventListener("click", function () {
        var isPassword = passwordInput.type === "password";
        passwordInput.type = isPassword ? "text" : "password";

        if (isPassword) {
          eyeIcon.innerHTML = '\
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"\
          d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.542-7a9.986 9.986 0 012.075-3.505M6 6l12 12"/>';
        } else {
          eyeIcon.innerHTML = '\
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"\
              d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />\
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"\
              d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />';
        }
      });
    }

    setupPasswordToggle("toggleLoginPassword", "loginPassword");
    setupPasswordToggle("toggleSignupPassword", "signupPassword");

    loginForm.onsubmit = function (e) {
      e.preventDefault();
      var email = document.getElementById("loginEmail").value.trim();
      var password = document.getElementById("loginPassword").value.trim();

      if (!email || !password) {
        msg.textContent = "Please enter email and password.";
        msg.style.color = "red";
        return;
      }

      auth.signInWithEmailAndPassword(email, password)
        .then(function () {
          msg.style.color = "green";
          msg.textContent = "Login successful!";
          setTimeout(function () {
            window.location.href = "home.html";
          }, 800);
        })
        .catch(function (error) {
          msg.style.color = "red";
          msg.textContent = error.message.replace(/^Firebase:\s*/, "");
        });
    };

    signupForm.onsubmit = function (e) {
      e.preventDefault();
      var email = document.getElementById("signupEmail").value.trim();
      var password = document.getElementById("signupPassword").value.trim();

      if (!email || !password) {
        msg.textContent = "Please enter email and password.";
        msg.style.color = "red";
        return;
      }

      auth.createUserWithEmailAndPassword(email, password)
        .then(function () {
          msg.style.color = "green";
          msg.textContent = "Signup successful!";
          setTimeout(function () {
            window.location.href = "home.html";
          }, 800);
        })
        .catch(function (error) {
          msg.style.color = "red";
          msg.textContent = error.message.replace(/^Firebase:\s*/, "");
        });
    };

    document.getElementById("passwordResetBtn").onclick = function () {
      var email = document.getElementById("loginEmail").value.trim();

      if (!email) {
        msg.style.color = "red";
        msg.textContent = "Please enter your email to reset password.";
        return;
      }

      auth.sendPasswordResetEmail(email)
        .then(function () {
          msg.style.color = "green";
          msg.textContent = "Password reset email sent!";
        })
        .catch(function (error) {
          msg.style.color = "red";
          msg.textContent = error.message.replace(/^Firebase:\s*/, "");
        });
    };

    document.getElementById("googleSignInBtn").addEventListener("click", function () {
      var provider = new firebase.auth.GoogleAuthProvider();
      auth.signInWithPopup(provider)
        .then(function () {
          msg.style.color = "green";
          msg.textContent = "Google sign-in successful!";
          setTimeout(function () {
            window.location.href = "home.html";
          }, 800);
        })
        .catch(function (error) {
          msg.style.color = "red";
          msg.textContent = error.message.replace(/^Firebase:\s*/, "");
        });
    });
  </script>
</body>

</html>